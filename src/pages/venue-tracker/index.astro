---
import BaseLayout from "../../layouts/BaseLayout.astro";
import scrapedGigs from "../../data/gigs-scraped.json";

export const pageTitle = "Venue Tracker";
export const pageTags = ["Gigs", "Helsinki"];
---

<BaseLayout title={pageTitle} description="An automated list of upcoming gigs at small venues in Helsinki.">
  <h1>{pageTitle}</h1>
  <p class="long-text">
This is <strong>new and experimental</strong> so always validate directly with the venue before trusting everything you see on this page.
<br>
Back in the days there was something called <em>Clubland</em> in Helsinki. A printed leaflet with all rock club gigs for next month or so. Every time our gig was listed there, we felt incredibly proud and like we've accomplished something. Clubland has not existed for many, many years, and now all we have are algorithm-based event lists in Facebook or paid event catalogs, which are highly unreliable. We care about live music, independent venues and bands of our size, and we want to make it easier to find gigs, starting with our hometown Helsinki. That’s why we built this Venue Tracker. Now you know what’s available next Wednesday night at Loose or Lepis, and you know what options you have for gigs when you Friday after work bar session extends into the evening.
<br>
In this first version we are scraping Semifinal, Lepakkomies, Bar Loose, and Kuudes linja. We’ll add more if this proves to work. There are some tweaks in the scraping, e.g. we exclude Bar Loose’s ‘Sunnarit’ event on Sunday evening, but we can’t stop all the post-gig disco events from appearing. Also, getting the right date for an event listed on a website is not always as easy as you would think. Remember, always check with a reliable source that an event is actually happening on that day.
  </p>

  <div class="gig-list">
    {scrapedGigs.length === 0 ? (
      <p class="muted">No gigs found at the moment. Check back later!</p>
    ) : (
      <ul>
        {scrapedGigs.map(gig => (
          <li class="item">
            <span class="date">{gig.date}</span>
            <span class="venue">{gig.venue}</span>
            <span class="event">{gig.event}</span>
            <a href={gig.link} class="link" target="_blank" rel="noopener">Details →</a>
          </li>
        ))}
      </ul>
    )}
  </div>
</BaseLayout>

<style>
  .gig-list ul {
    list-style: none;
    padding: 0;
    margin-top: 2rem;
  }
  .item {
    display: grid;
    grid-template-columns: 10ch 1fr 2fr auto;
    gap: 1rem;
    align-items: baseline;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(233, 232, 241, 0.1);
  }
  .date {
    font-variant-numeric: tabular-nums;
  }
  .venue {
    font-weight: 700;
    color: var(--flush-yellow);
  }
  .event {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .link {
    white-space: nowrap;
  }
  .muted {
    opacity: 0.8;
    margin-top: 2rem;
  }

  @media (max-width: 640px) {
    .item {
      grid-template-columns: 1fr;
      gap: 0.25rem;
      padding-bottom: 1.5rem;
    }
    .date, .venue, .event {
      grid-column: 1 / -1;
    }
    .link {
      margin-top: 0.5rem;
    }
  }
</style>
